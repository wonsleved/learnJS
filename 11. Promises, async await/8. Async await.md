# Async/await

## Async functions

```
async function f() {
  return 1;
}
```

Async function always returns a promise. Other values are wrapped in a resolved promise automatically.

## Await

```
// works only inside async functions
let value = await promise;
```

The keyword `await` makes JavaScript wait until that promise settles and returns its result.

`await` literally suspends the function execution until the promise settles, and then resumes it with the promise result. That doesn’t cost any CPU resources, because the JavaScript engine can do other jobs in the meantime: execute other scripts, handle events, etc.

***Can’t use `await` in regular functions***

***Modern browsers allow top-level `await` in modules***

***`await` accepts “thenables”***

***Async class methods.***
To declare an async class method, just prepend it with `async`.

## Error handling

In the case of a rejection, `await` throws the error, just as if there were a `throw` statement at that line.

We can catch that error using `try..catch`, the same way as a regular `throw`.

We can append `.catch` to handle it.

```
async function f() {
  let response = await fetch('http://no-such-url');
}

// f() becomes a rejected promise
f().catch(alert); // TypeError: failed to fetch // (*)
```

