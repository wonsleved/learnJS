# Class checking: "instanceof"

The `instanceof` operator allows to check whether an object belongs to a certain class. It also takes inheritance into account.

## The instanceof operator

```
obj instanceof Class
```

It returns `true` if obj belongs to the `Class` or a class inheriting from it.

It also works with constructor functions:

```
// instead of class
function Rabbit() {}

alert( new Rabbit() instanceof Rabbit ); // true
```

The algorithm of `obj instanceof Class` works roughly as follows:

1. If there’s a static method `Symbol.hasInstance`, then just call it: `Class[Symbol.hasInstance](obj)`. It should return either `true` or `false`, and we’re done. That’s how we can customize the behavior of `instanceof`.
2. Most classes do not have `Symbol.hasInstance`. In that case, the standard logic is used: `obj instanceOf Class` checks whether `Class.prototype` is equal to one of the prototypes in the `obj` prototype chain.

```
obj.__proto__ === Class.prototype?
obj.__proto__.__proto__ === Class.prototype?
obj.__proto__.__proto__.__proto__ === Class.prototype?
...
// if any answer is true, return true
// otherwise, if we reached the end of the chain, return false
```

There’s also a method `objA.isPrototypeOf(objB`), that returns `true` if `objA` is somewhere in the chain of prototypes for `objB`.

`Class` constructor itself does not participate in the check! Only the chain of prototypes and `Class.prototype` matters.

## Bonus: Object.prototype.toString for the type

```
let s = Object.prototype.toString;

alert( s.call(123) ); // [object Number]
alert( s.call(null) ); // [object Null]
alert( s.call(alert) ); // [object Function]
```

## Symbol.toStringTag

The behavior of Object `toString` can be customized using a special object property `Symbol.toStringTag`.

```
let user = {
  [Symbol.toStringTag]: "User"
};

alert( {}.toString.call(user) ); // [object User]
```

We can use `{}.toString.call` instead of `instanceof` for built-in objects when we want to get the type as a string rather than just to check.
