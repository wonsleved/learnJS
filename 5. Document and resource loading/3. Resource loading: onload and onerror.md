# Resource loading: onload and onerror

- `onload` – successful load, 
- `onerror` – an error occurred.

## Loading a script

```
let script = document.createElement('script');
script.src = "my.js";
document.head.append(script);
```

## script.onload

- `load` event - triggers after the script was loaded and executed.

In `onload` we can use script variables, run functions etc.

## script.onerror

```
script.onerror = function() {
  alert("Error loading " + this.src);
};
```

Events `onload/onerror` track only the loading itself.

## Other resources

The `load` and `error` events also work for other resources, basically for any resource that has an external `src`.

## Crossorigin policy

There’s a rule: scripts from one site can’t access contents of the other site.

**To allow cross-origin access, the <script> tag needs to have the crossorigin attribute, plus the remote server must provide special headers.**

There are three levels of cross-origin access:

1. No `crossorigin` attribute – access prohibited. 
2. `crossorigin="anonymous"` – access allowed if the server responds with the header `Access-Control-Allow-Origin` with `*` or our origin. Browser does not send authorization information and cookies to remote server. 
3. `crossorigin="use-credentials"` – access allowed if the server sends back the header `Access-Control-Allow-Origin` with our origin and `Access-Control-Allow-Credentials: true`. Browser sends authorization information and cookies to remote server.

