# Pointer events

## Pointer event types

Pointer event <=> Similar mouse event
- `pointerdown` `mousedown` 
- `pointerup` `mouseup` 
- `pointermove`	`mousemove` 
- `pointerover`	`mouseover` 
- `pointerout` `mouseout` 
- `pointerenter` `mouseenter` 
- `pointerleave` `mouseleave` 
- `pointercancel` - 
- `gotpointercapture` - 
- `lostpointercapture` -

***Replacing `mouse<event>` with `pointer<event>` in our code.***
We can do it.

## Pointer event properties


Pointer events have the same properties as mouse events, such as `clientX/Y`, `target` and more.

- `pointerId` – the unique identifier of the pointer causing the event.
- `pointerType` – the pointing device type. Must be a string, one of: “mouse”, “pen” or “touch”.
- `isPrimary` – is `true` for the primary pointer (the first finger in multi-touch).

- `width` – the width of the area where the pointer(finger). For mouse 1
- `height` – the height of the area where the pointer touches the device. 1 for unsupported
- `pressure` – the pressure of the pointer tip, in range from 0 to 1. For devices that don’t support pressure must be either 0.5 (pressed) or 0.
- `tangentialPressure` – the normalized tangential pressure.
- `tiltX`, `tiltY`, `twist` – pen-specific properties that describe how the pen is positioned relative the surface.

## Multi-touch

1. At the first finger touch:
- `pointerdown` with `isPrimary=true` and some `pointerId`.
2. For the second finger and more fingers (assuming the first one is still touching):
- `pointerdown` with `isPrimary=false` and a different `pointerId` for every finger.


## Event: pointercancel

Causes are:

- The pointer device hardware was physically disabled. 
- The device orientation changed (tablet rotated). 
- The browser decided to handle the interaction on its own, considering it a mouse gesture or zoom-and-pan action or something else.

***Prevent the default browser action to avoid `pointercancel`.***

We need to do two things:

1. Prevent native drag’n’drop from happening:
   - We can do this by setting `ball.ondragstart = () => false`.
   - That works well for mouse events.
2. For touch devices, there are other touch-related browser actions (besides drag’n’drop). To avoid problems with them too:
   - Prevent them by setting `#ball { touch-action: none }` in CSS.
     Then our code will start working on touch devices.

## Pointer capturing

The main method is:

- `elem.setPointerCapture(pointerId)` - retargets all subsequent events with the given pointerId to elem.

The binding is removed:

- automatically when `pointerup` or `pointercancel` events occur, 
- automatically when `elem` is removed from the document, 
- when `elem.releasePointerCapture(pointerId)` is called.

***Pointer capturing can be used to simplify drag’n’drop kind of interactions.***

There are two events associated with pointer capturing:

- `gotpointercapture` fires when an element uses `setPointerCapture` to enable capturing.
- `lostpointercapture` fires when the capture is released: either explicitly with `releasePointerCapture` call, or automatically on `pointerup/pointercancel`.