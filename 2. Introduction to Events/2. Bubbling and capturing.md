# Bubbling and capturing

## Bubbling

**When an event happens on an element, it first runs the handlers on it, then on its parent, then all the way up on other ancestors.**

***Almost all events bubble.***
`focus` event does not bubble.

## event.target

**The most deeply nested element that caused the event is called a target element, accessible as `event.target`.**

Differences from `this` (=`event.currentTarget`):

- `event.target` – is the “target” element that initiated the event, it doesn’t change through the bubbling process. 
- `this` – is the “current” element, the one that has a currently running handler on it.

## Stopping bubbling

A bubbling event goes from the target element straight up.

`event.stopPropagation()` - stop the bubbling.

***`event.stopImmediatePropagation()`.***
If an element has multiple event handlers on a single event, then even if one of them stops the bubbling, the other ones still execute.
`event.stopPropagation()` stops the move upwards, but on the current element all other handlers will run.

***Don’t stop bubbling without a need!***
Bubbling is convenient.

## Capturing

The standard DOM Events describes 3 phases of event propagation:

1. Capturing phase – the event goes down to the element. 
2. Target phase – the event reached the target element. 
3. Bubbling phase – the event bubbles up from the element.

**Before we only talked about bubbling, because the capturing phase is rarely used. Normally it is invisible to us.**

`addEventListener(event, handler)` don’t know anything about capturing, they only run on the 2nd and 3rd phases.

Catch event on the capturing phase:

```
elem.addEventListener(..., {capture: true})
// or, just "true" is an alias to {capture: true}
elem.addEventListener(..., true)
```

***To remove the handler, `removeEventListener` needs the same phase.***

***Listeners on same element and same phase run in their set order.***

