# Property flags and descriptors

## Property flags

Object properties, besides a `value`, have three special attributes (so-called “flags”):

- `writable` – if `true`, the value can be changed, otherwise it’s read-only.
- `enumerable` – if `true`, then listed in loops, otherwise not listed.
- `configurable` – if `true`, the property can be deleted and these attributes can be modified, otherwise not.

When we create a property “the usual way”, all of them are `true`. But we also can change them anytime.

The method `Object.getOwnPropertyDescriptor` allows to query the full information about a property.

```
let descriptor = Object.getOwnPropertyDescriptor(obj, propertyName)
```

The returned value is a so-called “property descriptor” object: it contains the value and all the flags.

```
{
  "value": value,
  "writable": true/false,
  "enumerable": true/false,
  "configurable": true/false
}
```

To change the flags, we can use `Object.defineProperty`.

```
Object.defineProperty(obj, propertyName, descriptor)
```

If the property exists, `defineProperty` updates its flags. Otherwise, it creates the property with the given value and flags; in that case, if a flag is not supplied, it is assumed `false`.

## Non-writable

***Errors appear only in strict mode***

## Non-enumerable

Property won’t appear in a `for..in` loop.

Non-enumerable properties are also excluded from `Object.keys`.

## Non-configurable

A non-configurable property can’t be deleted, its attributes can’t be modified.

***Please note: `configurable: false` prevents changes of property flags and its deletion, while allowing to change its value.***

***The only attribute change possible: writable true → false***

## Object.defineProperties

```
Object.defineProperties(obj, {
  prop1: descriptor1,
  prop2: descriptor2
  // ...
});
```

## Object.getOwnPropertyDescriptors

To get all property descriptors at once, we can use the method `Object.getOwnPropertyDescriptors(obj)`.

Clone object with descriptors:

```
let clone = Object.defineProperties({}, Object.getOwnPropertyDescriptors(obj));
```

## Sealing an object globally

- `Object.preventExtensions(obj)` - forbids the addition of new properties to the object.
- `Object.seal(obj)` - forbids adding/removing of properties. Sets `configurable: false` for all existing properties.
- `Object.freeze(obj)` - forbids adding/removing/changing of properties. Sets `configurable: false, writable: false` for all existing properties.
- `Object.isExtensible(obj)` - returns false if adding properties is forbidden, otherwise true.
- `Object.isSealed(obj)` - returns `true` if adding/removing properties is forbidden, and all existing properties have `configurable: false`.
- `Object.isFrozen(obj)` - returns true if adding/removing/changing properties is forbidden, and all current properties are configurable: false, writable: false.

