# Map and Set

## Map

Map is a collection of keyed data items, just like an `Object`. But the main difference is that `Map` allows keys of any type.

- `new Map()` – creates the map.
- `map.set(key, value)` – stores the value by the key.
- `map.get(key)` – returns the value by the key, undefined if key doesn’t exist in map.
- `map.has(key)` – returns true if the key exists, false otherwise.
- `map.delete(key)` – removes the value by the key.
- `map.clear()` – removes everything from the map.
- `map.size` – returns the current element count.

***`map[key]` isn’t the right way to use a `Map`.***
We should use `map` methods: `set`, `get` and so on.

***How `Map` compares keys***

`Map` uses the algorithm SameValueZero. It is roughly the same as strict equality `===,` but the difference is that `NaN` is considered equal to `NaN`. So `NaN` can be used as the key as well.

***Chaining is available***

## Iteration over Map

- `map.keys()` – returns an iterable for keys, 
- `map.values()` – returns an iterable for values,
- `map.entries()` – returns an iterable for entries `[key, value]`, it’s used by default in `for..of`.

***The insertion order is used.***
The iteration goes in the same order as the values were inserted.

`Map` has a built-in `forEach` method.

## Object.entries: Map from Object

In `Map` we can pass an array (or another iterable) with key/value pairs for initialization.

```
let obj = {
  name: "John",
  age: 30
};

let map = new Map(Object.entries(obj));

alert( map.get('name') ); // John
```

## Object.fromEntries: Object from Map

There’s `Object.fromEntries` method that the given an array of `[key, value]` pairs, it creates an object from them.

`map.entries()` returns an iterable of key/value pairs, exactly in the right format for `Object.fromEntries`.

Or: 

```
let obj = Object.fromEntries(map); // omit .entries()
```

## Set

A `Set` is a special type collection – “set of values” (without keys), where each value may occur only once.

- `new Set(iterable)` – creates the set, and if an `iterable` object is provided (usually an array), copies values from it into the set.
- `set.add(value)` – adds a value, returns the set itself.
- `set.delete(value)` – removes the value, returns `true` if `value` existed at the moment of the call, otherwise `false`.
- `set.has(value)` – returns `true` if the `value` exists in the set, otherwise `false`.
- `set.clear()` – removes everything from the set.
- `set.size` – is the elements count.

The main feature is that repeated calls of `set.add(value)` with the same value don’t do anything.

## Iteration over Set

We can loop over a set either with `for..of` or using `forEach`.

The callback function passed in `forEach` has 3 arguments: a `value`, then the same value `valueAgain`, and then the target object.

The methods: 

- `set.keys()` – returns an iterable object for values,
- `set.values()` – same as `set.keys()`, for compatibility with `Map`,
- `set.entries()` – returns an iterable object for entries `[value, value]`, exists for compatibility with `Map`.